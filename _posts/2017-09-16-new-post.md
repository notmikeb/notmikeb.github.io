---
layout: post
title: "Use sip-pyqt5 to generate pyd"
description: ""
category: 
tags: [python, pyqt5, sip]
---
{% include JB/setup %}

## Object - Use sip.exe of pyqt5 of windows to write a sample with mingw 

+ python --vesion
 Python 3.5.2
+ python -m pip -V
 pip 9.0.1 from c:\python35\lib\site-packages (python 3.5)

### mingw
C:\mingw64>mingw-w64

+ PATH c:\mingw64\mingw64\bin;
+ mingw32-make
+ gcc.exe
+ g++.exe

### mingw static library

https://www.codeproject.com/Articles/84461/MinGW-Static-and-Dynamic-Libraries

use g++ to compile object files
use ar to compile static library

### python3

+ path=c:\python35

### Error ! no sipconfig ! no sipdistutils

ImportError: No module named 'sipconfig'
change to sipdistutils
and not longer support at PyQt5 and sip5 further

### sipdistutil
discussion
https://github.com/wbsoft/python-poppler-qt5/issues/14
download url
https://www.riverbankcomputing.com/hg/sip/file/14685a6e736e/sipdistutils.py

+ setup.py not found gcc
change to use msvc
+ setup.py not found sipconfig.py
copy sip source's sipconfig.py to local
+ setup.py can not find the sip.h and sip.exe
change sipconfig.py setting
https://docs.python.org/2/distutils/setupscript.html
+ cannot find word.h/word.cpp
add  include_dirs to setup.py
    Extension("word", ["word.sip", "word.cpp"], include_dirs=['.', ]),
    ],
+ build pass but run-time error. assert at sip.dll

### default distutil of python setting
C:\python35>dir /s/b *.cfg
C:\python35\Lib\distutils\distutils.cfg

```
[build]
compiler=msvc
```

### Get spiconfig.py from sip ssurce cod
sip_src.zip

python configure.py --platform win32-g++
generate a mingw64 vesrion sipconfig.py

python configure.py --platform 
generate a vs2015 version sipconfig.py

### python setup.py bdist 
```
running bdist
running bdist_dumb
running build
running build_ext
installing to build\bdist.win-amd64\dumb
running install
running install_lib
creating build\bdist.win-amd64
creating build\bdist.win-amd64\dumb
creating build\bdist.win-amd64\dumb\python35
creating build\bdist.win-amd64\dumb\python35\Lib
creating build\bdist.win-amd64\dumb\python35\Lib\site-packages
copying build\lib.win-amd64-3.5\word.cp35-win_amd64.pyd -> build\bdist.win-amd64\dumb\python35\Lib\site-packages
running install_egg_info
Writing build\bdist.win-amd64\dumb\python35\Lib\site-packages\word-0.0.0-py3.5.egg-info
creating J:\git_home\workspace\qt\siptest\sip_tutorial1\dist
creating 'J:\git_home\workspace\qt\siptest\sip_tutorial1\dist\word-0.0.0.win-amd64.zip' and adding '.' to it
adding 'python35\Lib\site-packages\word-0.0.0-py3.5.egg-info'
adding 'python35\Lib\site-packages\word.cp35-win_amd64.pyd'
removing 'build\bdist.win-amd64\dumb' (and everything under it)

c:\python35\lib\distutils\dist.py:261: UserWarning: Unknown distribution option: 'versione'
  warnings.warn(msg)
running install
running build
running build_ext
running install_lib
copying build\lib.win-amd64-3.5\word.cp35-win_amd64.pyd -> c:\python35\Lib\site-packages
running install_egg_info
Writing c:\python35\Lib\site-packages\word-0.0.0-py3.5.egg-info

```